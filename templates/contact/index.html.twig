{% extends 'base.html.twig' %}

{% block title %}Contact{% endblock %}

{% block body %}
    <div class="container mt-5">
        <h1 class="text-center mb-4">Contactez-nous</h1>
        <p class="text-center">Remplissez le formulaire ci-dessous pour nous contacter. Nous vous répondrons dans les plus brefs délais.</p>

        {{ form_start(form) }}
        {# Démarre le formulaire #}

        <div class="row justify-content-center">
            {# Conteneur pour centrer le formulaire sur la page #}

            <div class="col-md-6 mb-3">
                {# Champ pour le nom avec validation HTML5 et échappement automatique des entrées #}
                {{ form_row(form.Nom, {
                    'attr': {
                        'placeholder': 'Votre nom',
                        'class': 'form-control',
                        'required': 'required',
                        'pattern': '^[A-Za-zÀ-ÿ\' -]+$',
                        'maxlength': '50'
                    }
                }) }}
            </div>

            <div class="col-md-6 mb-3">
                {# Champ pour le prénom #}
                {{ form_row(form.Prenom, {
                    'attr': {
                        'placeholder': 'Votre prénom',
                        'class': 'form-control',
                        'required': 'required',
                        'pattern': '^[A-Za-zÀ-ÿ\' -]+$',
                        'maxlength': '50'
                    }
                }) }}
            </div>

            <div class="col-md-6 mb-3">
                {# Champ pour l'email avec validation HTML5 #}
                {{ form_row(form.Email, {
                    'attr': {
                        'placeholder': 'Votre adresse email',
                        'class': 'form-control',
                        'required': 'required',
                        'type': 'email',
                        'maxlength': '100'
                    }
                }) }}
            </div>

            <div class="col-md-6 mb-3">
                {# Champ pour le numéro de téléphone avec une validation du format #}
                {{ form_row(form.Telephone, {
                    'attr': {
                        'placeholder': 'Votre numéro de téléphone',
                        'class': 'form-control',
                        'required': 'required',
                        'pattern': '^(\+\d{1,3}[- ]?)?\d{10}$',
                        'maxlength': '15'
                    }
                }) }}
            </div>

            <div class="col-12 mb-3">
                {# Champ pour le message, avec une limite de caractères pour éviter les abus #}
                {{ form_row(form.Demande, {
                    'attr': {
                        'placeholder': 'Votre message ou demande',
                        'class': 'form-control',
                        'rows': 5,
                        'required': 'required',
                        'maxlength': '500'
                    }
                }) }}
            </div>

            <div class="col-12 d-flex justify-content-center">
                {# Personnalisation du bouton Save #}
                {{ form_row(form.Save, {
                    'attr': {
                        'class': 'btn btn-primary btn-lg'
                    }
                }) }}
            </div>
        </div>

        {{ form_end(form) }}
        {# Fin du formulaire #}

        {# Messages de retour utilisateur après soumission du formulaire #}
        {% if app.session.flashBag.has('success') %}
            <div class="alert alert-success mt-4 text-center" role="alert">
                {{ app.session.flashBag.get('success')[0] }}
            </div>
        {% elseif app.session.flashBag.has('error') %}
            <div class="alert alert-danger mt-4 text-center" role="alert">
                {{ app.session.flashBag.get('error')[0] }}
            </div>
        {% endif %}
    </div>
{% endblock %}
